/**********************************************************************
**
** This file is part of ANGLECORE, an open-source software development
** kit for audio plugins.
**
** ANGLECORE is free software: you can redistribute it and / or modify
** it under the terms of the GNU General Public License as published by
** the Free Software Foundation, either version 3 of the License, or
** (at your option) any later version.
**
** ANGLECORE is distributed in the hope that it will be useful,
** but WITHOUT ANY WARRANTY; without even the implied warranty of
** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.See the
** GNU General Public License for more details.
**
** You should have received a copy of the GNU General Public License
** along with ANGLECORE.If not, see <https://www.gnu.org/licenses/>.
**
** Copyright(C) 2020, ANGLE
**
**********************************************************************/

#include "MIDI.h"

namespace ANGLECORE
{
    floating_type MIDI::getFrequencyOf(unsigned char noteNumber)
    {
        return m_MIDI_frequencies_with_A4_at_440[noteNumber];
    }

    floating_type MIDI::getFrequencyOf(unsigned char noteNumber, floating_type frequencyOfA4)
    {
        return frequencyOfA4 * m_normalized_MIDI_coefficients[noteNumber];
    }

    const floating_type MIDI::m_MIDI_frequencies_with_A4_at_440[ANGLECORE_NUM_MIDI_NOTES] =
    {
        8.175798915643707,
        8.6619572180272524,
        9.1770239974189884,
        9.7227182413150288,
        10.300861153527183,
        10.913382232281373,
        11.562325709738575,
        12.249857374429663,
        12.978271799373287,
        13.75,
        14.567617547440307,
        15.433853164253883,
        16.351597831287414,
        17.323914436054505,
        18.354047994837977,
        19.445436482630058,
        20.601722307054366,
        21.826764464562746,
        23.12465141947715,
        24.499714748859326,
        25.956543598746574,
        27.5,
        29.13523509488062,
        30.867706328507751,
        32.703195662574828,
        34.64782887210901,
        36.70809598967594,
        38.890872965260115,
        41.203444614108747,
        43.653528929125486,
        46.2493028389543,
        48.999429497718666,
        51.913087197493141,
        55,
        58.270470189761241,
        61.735412657015502,
        65.406391325149656,
        69.295657744218019,
        73.416191979351879,
        77.781745930520231,
        82.406889228217494,
        87.307057858250971,
        92.4986056779086,
        97.998858995437331,
        103.82617439498628,
        110,
        116.54094037952248,
        123.47082531403103,
        130.81278265029931,
        138.59131548843604,
        146.83238395870379,
        155.56349186104046,
        164.81377845643496,
        174.61411571650194,
        184.9972113558172,
        195.99771799087463,
        207.65234878997256,
        220,
        233.08188075904496,
        246.94165062806206,
        261.62556530059862,
        277.18263097687208,
        293.66476791740757,
        311.12698372208092,
        329.62755691286992,
        349.22823143300388,
        369.9944227116344,
        391.99543598174927,
        415.30469757994513,
        440,
        466.16376151808993,
        493.88330125612413,
        523.25113060119725,
        554.36526195374415,
        587.32953583481515,
        622.25396744416184,
        659.25511382573984,
        698.45646286600777,
        739.9888454232688,
        783.99087196349853,
        830.60939515989025,
        880,
        932.32752303617985,
        987.76660251224826,
        1046.5022612023945,
        1108.7305239074883,
        1174.6590716696303,
        1244.5079348883237,
        1318.5102276514797,
        1396.9129257320155,
        1479.9776908465376,
        1567.9817439269971,
        1661.2187903197805,
        1760,
        1864.6550460723597,
        1975.5332050244961,
        2093.004522404789,
        2217.4610478149766,
        2349.3181433392601,
        2489.0158697766474,
        2637.0204553029598,
        2793.8258514640311,
        2959.9553816930752,
        3135.9634878539946,
        3322.437580639561,
        3520,
        3729.3100921447194,
        3951.0664100489921,
        4186.009044809578,
        4434.9220956299532,
        4698.6362866785203,
        4978.0317395532948,
        5274.0409106059196,
        5587.6517029280622,
        5919.9107633861504,
        6271.9269757079892,
        6644.875161279122,
        7040,
        7458.620184289437,
        7902.1328200979879,
        8372.0180896191559,
        8869.8441912599064,
        9397.2725733570442,
        9956.0634791065895,
        10548.081821211836,
        11175.303405856126,
        11839.821526772301,
        12543.853951415975
    };

    const floating_type MIDI::m_normalized_MIDI_coefficients[ANGLECORE_NUM_MIDI_NOTES] =
    {
        0.018581361171917516,
        0.01968626640460739,
        0.02085687272140679,
        0.022097086912079612,
        0.023411048076198145,
        0.024803141437003122,
        0.026278012976678578,
        0.027840584941885599,
        0.029496072271302926,
        0.03125,
        0.033108221698727971,
        0.035076939009667914,
        0.037162722343835032,
        0.03937253280921478,
        0.041713745442813581,
        0.044194173824159223,
        0.046822096152396291,
        0.049606282874006244,
        0.052556025953357156,
        0.055681169883771198,
        0.058992144542605852,
        0.0625,
        0.066216443397455957,
        0.0701538780193358,
        0.074325444687670064,
        0.078745065618429574,
        0.083427490885627134,
        0.088388347648318447,
        0.093644192304792609,
        0.09921256574801246,
        0.10511205190671431,
        0.11136233976754242,
        0.11798428908521168,
        0.125,
        0.13243288679491191,
        0.1403077560386716,
        0.14865088937534013,
        0.15749013123685915,
        0.16685498177125427,
        0.17677669529663689,
        0.18728838460958522,
        0.19842513149602492,
        0.21022410381342863,
        0.22272467953508485,
        0.23596857817042335,
        0.25,
        0.26486577358982383,
        0.28061551207734325,
        0.29730177875068026,
        0.3149802624737183,
        0.33370996354250859,
        0.35355339059327379,
        0.37457676921917038,
        0.3968502629920499,
        0.42044820762685725,
        0.44544935907016964,
        0.47193715634084676,
        0.5,
        0.52973154717964765,
        0.56123102415468651,
        0.59460355750136051,
        0.6299605249474366,
        0.66741992708501718,
        0.70710678118654757,
        0.74915353843834076,
        0.79370052598409979,
        0.8408964152537145,
        0.89089871814033927,
        0.94387431268169353,
        1,
        1.0594630943592953,
        1.122462048309373,
        1.189207115002721,
        1.2599210498948732,
        1.3348398541700344,
        1.4142135623730951,
        1.4983070768766815,
        1.5874010519681994,
        1.681792830507429,
        1.7817974362806785,
        1.8877486253633868,
        2,
        2.1189261887185906,
        2.244924096618746,
        2.3784142300054421,
        2.5198420997897464,
        2.6696797083400687,
        2.8284271247461903,
        2.996614153753363,
        3.1748021039363992,
        3.363585661014858,
        3.5635948725613571,
        3.7754972507267741,
        4,
        4.2378523774371812,
        4.4898481932374912,
        4.7568284600108841,
        5.0396841995794928,
        5.3393594166801366,
        5.6568542494923806,
        5.993228307506727,
        6.3496042078727974,
        6.727171322029716,
        7.1271897451227151,
        7.5509945014535473,
        8,
        8.4757047548743625,
        8.9796963864749824,
        9.5136569200217682,
        10.079368399158986,
        10.678718833360273,
        11.313708498984761,
        11.986456615013454,
        12.699208415745595,
        13.454342644059432,
        14.25437949024543,
        15.101989002907095,
        16,
        16.951409509748721,
        17.959392772949972,
        19.027313840043536,
        20.158736798317967,
        21.357437666720553,
        22.627416997969522,
        23.972913230026901,
        25.398416831491197,
        26.908685288118864,
        28.508758980490853
    };
}